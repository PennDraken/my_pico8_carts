pico-8 cartridge // http://www.pico-8.com
version 38
__lua__


function _init()
    measure(table_link)
    --measure(direct_assignment)
end

function measure(func)
    start_mem = stat(0)
    arr = func()
    printh(stat(0) - start_mem)
    arr = {}
end
num_arr={1,2,3,4}

function table_link()
    arr = {}

    for i=0, 10000 do
        add(arr, nil)
    end

    for i=0, 10000 do
        add(arr, num_arr[2])
    end

    for i=0, 10000 do
        add(arr, num_arr[3])
    end

    for i=0, 10000 do
        add(arr, num_arr[4])
    end

    return arr
end

function direct_assignment()
    arr = {}
    for i=0, 10000 do
        add(arr, 1)
    end

    for i=0, 10000 do
        add(arr, 2)
    end

    for i=0, 10000 do
        add(arr, 3)
    end

    for i=0, 10000 do
        add(arr, 4)
    end

    for i=0, 10000 do
        add(arr, 5)
    end

    for i=0, 10000 do
        add(arr, 6)
    end

    for i=0, 10000 do
        add(arr, 7)
    end

    for i=0, 10000 do
        add(arr, 8)
    end
    return arr
end

__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
